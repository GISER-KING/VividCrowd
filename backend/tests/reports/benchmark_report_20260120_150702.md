# 数字客服系统测试报告

**生成时间**: 2026-01-20 15:07:02
**测试用例数**: 499
**数据来源**: CustomerServiceQA 表

---

## 指标概览

| 指标 | 结果 | 阈值 | 状态 |
|------|------|------|------|
| 召回命中率 | 99.8% | ≥80% | ✅ 通过 |
| 误转人工率 | 0.6% | ≤10% | ✅ 通过 |
| P95 响应时间 | 407ms | <3000ms | ✅ 通过 |
| 回答准确度 | 99.8% | ≥85% | ✅ 通过 |

---

## 1. 召回命中率

### 指标定义
用户问题能否被系统正确匹配到对应的 QA 知识库记录。

### 计算方法
```
召回命中率 = 正确匹配的问题数 / 总测试问题数 × 100%
```
- 测试输入：CustomerServiceQA 表中的 typical_question（标准问题）
- 匹配判定：qa_matcher.match() 返回的 topic_name 等于期望的 topic_name

### 测试结果

| 指标 | 数值 |
|------|------|
| 命中数 | 498 |
| 总数 | 499 |
| 命中率 | 99.8% |

### 未命中列表

- [ID: 212] 这是孩子今天的早中晚餐和今天的大便情况。...
  - 期望: 儿童饮食与排便记录, 实际匹配: 三餐与大便情况评估

---

## 2. 误转人工率

### 指标定义
正常业务问题被错误地触发"转人工"的比例。测试用例都是正常问题，不应触发转人工。

### 计算方法
```
误转人工率 = 被误判为需要转人工的问题数 / 总测试问题数 × 100%
```
- 检测方法：qa_matcher.should_transfer_to_human()
- 触发条件：包含转人工关键词 或 不满意关键词

### 测试结果

| 指标 | 数值 |
|------|------|
| 总检测数 | 499 |
| 触发转人工数 | 3 |
| 误转人工率 | 0.6% |

### 误触发列表

- [ID: 273] 奶粉也不行是吧？如何替代才能保证营养？...
- [ID: 404] 杂粮粥可以给孩子喝吗？红豆薏米燕麦等打豆浆行不行？...
- [ID: 464] 请问啥时候能出方案？孩子睡眠太差了。...

---

## 3. 响应速度

### 指标定义
从收到用户问题到返回回复的端到端响应时间（不含流式传输时间）。

### 计算方法
```
响应时间 = handle_query() 调用结束时间 - 调用开始时间
```
- P50: 50% 的请求在此时间内完成
- P95: 95% 的请求在此时间内完成
- P99: 99% 的请求在此时间内完成

### 测试结果

| 指标 | 时间(ms) |
|------|----------|
| 平均 | 306 |
| P50 | 265 |
| P95 | 407 |
| P99 | 539 |
| 最小 | 225 |
| 最大 | 11660 |


---

## 4. 回答准确度

### 指标定义
系统生成的回答是否正确回应了用户问题，并包含了标准话术的核心要点。

### 计算方法
```
回答准确度 = LLM 判定为"正确"的回答数 / 总评估数 × 100%
```
- 评估方式：使用 LLM (qwen-plus) 自动评估
- 评估依据：对比实际回答与标准话术 (standard_script)
- 评估标准：是否正确回应问题 + 是否包含核心要点

### 测试结果

| 指标 | 数值 |
|------|------|
| 准确数 | 498 |
| 评估总数 | 499 |
| 准确率 | 99.8% |

### 不准确案例

- [ID: 184] 好的好的，谢谢...
  - 原因: 未包含支付、邮寄及查收要点
